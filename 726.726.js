(self.webpackChunk=self.webpackChunk||[]).push([[726],{726:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Msg:()=>z,Msg$reflection:()=>y,State:()=>N,State$reflection:()=>$,Todo:()=>L,Todo$reflection:()=>V,appTitle:()=>W,div:()=>J,findParentWithClass:()=>R,init:()=>F,inputField:()=>b,level:()=>O,mkProgram:()=>_,onEnterOrEscape:()=>x,renderTodo:()=>Z,renderTodoButtons:()=>A,renderTodoDescription:()=>U,todoList:()=>q,update:()=>D,view:()=>B});var i=n(541),o=n(597),r=n(380);function s(){let e="";for(let t=0;t++<36;)e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-";return e}var d=n(464),u=n(416),c=n(513),a=n(229),l=n(728),f=n(657),w=n(65),m=n(68),p=n(20),T=n(24),h=n(142),v=n(640);function I(e){return(0,v.He)((0,v.EI)(e,1e4))}function g(e){return function(e=0,t=0,n=0,i=0,o=0){switch(arguments.length){case 1:return I(arguments[0]);case 3:e=0,t=arguments[0],n=arguments[1],i=arguments[2],o=0}return 864e5*e+36e5*t+6e4*n+1e3*i+o}(0,0,e)}function E(e){return e/1e3}var k=n(163);class G extends i.WV{constructor(e,t,n,i,o){super(),this.StartedOrResumed=e,this.Elapsed=t,this.Timeout=n,this.Active=i,this.Finished=o}}class M extends i.EJ{constructor(e,...t){super(),this.tag=0|e,this.fields=t}cases(){return["Timeout"]}}class S extends i.EJ{constructor(e,...t){super(),this.tag=0|e,this.fields=t}cases(){return["Tick","Toggle"]}}function C(e){return(0,T.tg)((e=>new S(1,e)),(0,k.z4)((e=>function(e){return new G((0,h.zO)(),g(0),g(5),e,!1)}(e)),((t,n)=>{const i=function(e,t){if(1===e.tag){const n=e.fields[0];return n===t.Active?[t,void 0]:n?[new G((0,h.zO)(),g(0),t.Timeout,!0,!1),void 0]:[new G(t.StartedOrResumed,t.Elapsed,t.Timeout,!1,t.Finished),void 0]}if(t.Active){const e=new G(t.StartedOrResumed,(0,h.sd)((0,h.zO)(),t.StartedOrResumed),t.Timeout,t.Active,t.Finished);return!e.Finished&&e.Elapsed>e.Timeout?[new G(e.StartedOrResumed,e.Elapsed,e.Timeout,e.Active,!0),new M(0)]:[e,void 0]}return[t,void 0]}(t,n),o=i[0],r=i[1];return(0,w.UP)(e,(0,u.qo)(r)),o}),((e,t)=>function(e,t){return(0,c.hv4)(l.Vt,[(0,a.$ZC)(l.aG,"subtitle is-6"),(0,l.c1)((e=>{const n=0|setInterval((()=>{t(new S(0))}),1e3);return(0,r.Fp)((0,r.zt)("Set interval %i"))(n),(0,l.L0)((()=>{clearInterval(n),(0,r.Fp)((0,r.zt)("Clear interval %i"))(n)}))})),(0,c.GH$)(l.Vt,(0,r.WU)("{0:00}:{1:00}",Math.floor((n=e.Elapsed,n/6e4)),~~Math.floor(E(e.Elapsed))%60))]);var n}(e,t))))}class L extends i.WV{constructor(e,t,n,i){super(),this.Id=e,this.Description=t,this.Timeout=n,this.Completed=i}}function V(){return(0,o.jn)("Todos.Todo",[],L,(()=>[["Id",(0,o.qJ)("System.Guid")],["Description",o.Io],["Timeout",o.QF],["Completed",o.QF]]))}class N extends i.WV{constructor(e,t,n){super(),this.TodoList=e,this.NewTodo=t,this.Editing=n}}function $(){return(0,o.jn)("Todos.State",[],N,(()=>[["TodoList",(0,o.B6)(V())],["NewTodo",o.Io],["Editing",(0,o.JS)((0,o.sJ)((0,o.qJ)("System.Guid"),o.Io))]]))}class z extends i.EJ{constructor(e,...t){super(),this.tag=0|e,this.fields=t}cases(){return["Timeout","SetNewTodo","AddNewTodo","DeleteTodo","ToggleCompleted","CancelEdit","ApplyEdit","StartEditingTodo","SetEditedDescription"]}}function y(){return(0,o.er)("Todos.Msg",[],z,(()=>[[["Item",(0,o.qJ)("System.Guid")]],[["Item",o.Io]],[],[["Item",(0,o.qJ)("System.Guid")]],[["Item",(0,o.qJ)("System.Guid")]],[],[],[["Item",(0,o.qJ)("System.Guid")]],[["Item",o.Io]]]))}function F(){return new N((0,d.kM)([new L(s(),"Learn F#",!1,!1),new L(s(),"Learn Elmish",!1,!0)]),"",void 0)}function D(e,t){let n;switch(n=0===e.tag?0:1===e.tag?1:2===e.tag&&(0,r.TF)(t.NewTodo)?2:3,n){case 0:{const n=e.fields[0];return new N((0,d.UI)((e=>e.Id===n?new L(e.Id,e.Description,!0,e.Completed):e),t.TodoList),t.NewTodo,t.Editing)}case 1:{const n=e.fields[0];return(0,r.Fp)((0,r.zt)("New todo %s"))(n),new N(t.TodoList,n,t.Editing)}case 2:return t;case 3:switch(e.tag){case 2:{const e=new L(s(),t.NewTodo,!1,!1);return new N((0,d.QI)(e,t.TodoList),"",t.Editing)}case 3:{const n=e.fields[0];return new N((0,d.hX)((e=>e.Id!==n),t.TodoList),t.NewTodo,t.Editing)}case 4:{const n=e.fields[0];return new N((0,d.UI)((e=>{if(e.Id===n){const t=!e.Completed;return new L(e.Id,e.Description,!t&&e.Timeout,t)}return e}),t.TodoList),t.NewTodo,t.Editing)}case 7:{const n=e.fields[0];return new N(t.TodoList,t.NewTodo,(0,u.UI)((e=>[e.Id,e.Description]),(0,d.zw)((e=>e.Id===n),t.TodoList)))}case 5:return new N(t.TodoList,t.NewTodo,void 0);case 6:{const e=t.Editing;if(null!=e){const n=e[0],i=e[1];return new N((0,d.UI)((e=>e.Id===n?new L(e.Id,i,e.Timeout,e.Completed):e),t.TodoList),t.NewTodo,void 0)}return t}case 8:{const n=e.fields[0];return new N(t.TodoList,t.NewTodo,(0,u.UI)((e=>[e[0],n]),t.Editing))}default:throw new Error("Match failure: Todos.Msg")}}}function J(e,t){return(0,c.oiW)(l.Vt,(0,d.QI)((0,a.$u_)(l.aG,e),t))}function x(e,t,n){return(0,f.pf)(l.Ev,(i=>{const o=(0,l.$O)(i.target);switch(i.key){case"Enter":e(t),o.value="";break;case"Escape":e(n),o.value="",o.blur()}}))}function O(e,t){return J((0,d.ri)("level"),(0,d.kM)([J((0,d.ri)("level-left"),(0,d.UI)((e=>J((0,d.ri)("level-item"),(0,d.ri)(e))),e)),J((0,d.ri)("level-right"),(0,d.UI)((e=>J((0,d.ri)("level-item"),(0,d.ri)(e))),t))]))}function W(e,t){return(0,c.hv4)(l.Vt,[(0,a.$ZC)(l.aG,"title"),(0,c.GH$)(l.Vt,"Elmish To-Do List")])}function b(e,t){return J((0,d.kM)(["field","has-addons"]),(0,d.kM)([J((0,d.kM)(["control","is-expanded"]),(0,d.ri)((0,c.E7r)(l.Vt,[(0,a.$u_)(l.aG,["input","is-medium"]),(0,a.kkz)(l.aG,e.NewTodo),(0,f.DW)(l.Ev,(e=>{t(new z(1,e))})),x(t,new z(2),new z(1,""))]))),J((0,d.ri)("control"),(0,d.ri)((0,c.JoY)(l.Vt,[(0,a.$u_)(l.aG,["button","is-primary","is-medium"]),(0,f.Yy)(l.Ev,(e=>{t(new z(2))})),(0,c.BSM)(l.Vt,[(0,a.$u_)(l.aG,["fa","fa-plus"])])])))]))}function R(e,t){for(;;){const n=e,i=t.parentElement;if(null==i)return(0,r.rp)((0,r.zt)("Cannot find parent witch class %s"))(n);if(i.classList.contains(n))return i;e=n,t=i}}function U(e,t,n){return J((0,d.kM)(["column","is-7"]),(0,w.zZ)((0,w.gw)((()=>{if(null==n)return(0,w.ri)((0,c.hv4)(l.Vt,[(0,a.$ZC)(l.aG,"subtitle"),(0,m.ixp)(l.c4),(0,m.vrB)(l.c4),(0,c.GH$)(l.Vt,t.Description),(0,f.p7)(l.Ev,(n=>{e(new z(7,t.Id))}))]));{const t=n;return(0,w.ri)((0,c.E7r)(l.Vt,[(0,a.$u_)(l.aG,["input","is-medium"]),(0,a.kkz)(l.aG,t),(0,f.DW)(l.Ev,(t=>{e(new z(8,t))})),x(e,new z(6),new z(5)),(0,l.c1)((t=>{const n=(0,l.$O)(t.elm),i=R("box",n);return n.select(),(0,f.RT)(l.Ob,(t=>{i.contains(t.target)||e(new z(5))}))}))]))}}))))}function A(e,t,n){let i,o,r;const s=null!=n,u=(t,n,i,o)=>(0,c.JoY)(l.Vt,[(0,a.Etn)(l.aG,(0,w.zZ)((0,w.gw)((()=>(0,w.R3)((0,w.ri)([!0,"button"]),(0,w.gw)((()=>(0,w.R3)((0,w.ri)([!n,"is-invisible"]),(0,w.gw)((()=>i)))))))))),(0,m.WNX)(l.c4,(0,p.Tm)(4)+"px"),(0,f.Yy)(l.Ev,(n=>{n.preventDefault(),e(t)})),(0,c.BSM)(l.Vt,[(0,a.$u_)(l.aG,o)])]);return J((0,d.kM)(["column","is-4"]),(0,d.kM)([u(new z(6),s,[[!0,"is-primary"]],(0,d.kM)(["fa","fa-save"])),(i=!s,u(new z(4,t.Id),i,[[t.Completed,"is-success"]],(0,d.kM)(["fa","fa-check"]))),(o=!s,u(new z(7,t.Id),o,[[!0,"is-primary"]],(0,d.kM)(["fa","fa-edit"]))),(r=!s,u(new z(3,t.Id),r,[[!0,"is-danger"]],(0,d.kM)(["fa","fa-times"])))]))}function Z(e,t,n){return(0,r.Fp)((0,r.sX)("Rendering todo %P(), editing: %P()",[t.Description,null!=n])),(0,c.xlN)(l.Vt,[(0,a.$ZC)(l.aG,"box"),(0,m.VsZ)(l.c4,t.Timeout?"#FF0000":"transparent"),(0,m.sC3)(l.c4,0),(0,m.zWA)(l.c4,1.5),(0,m.IhO)(l.c4,"opacity","transform"),(0,m.R4x)(l.c4,.5),(0,l.Nc)(l.c4,[(0,m.sC3)(l.c4,1),(0,m.zWA)(l.c4,1)]),(0,l.ss)(l.c4,[(0,m.sC3)(l.c4,0),(0,m.zWA)(l.c4,.1)]),J((0,d.ri)("columns"),(0,d.kM)([U(e,t,n),A(e,t,n),(0,T.rR)("div.column",!t.Completed,C((n=>{e(new z(0,t.Id))})))]))])}function q(e,t){return(0,c.XZi)(l.Vt,(0,d.UI)((e=>(0,l.y2)((e=>Z(t,e[0],e[1])),(e=>e[0].Id),e)),(0,d.UI)((t=>[t,(0,u.ak)((e=>{const n=e[0],i=e[1];return n===t.Id?i:void 0}),e.Editing)]),e.TodoList)))}function B(e,t){return(0,c.oiW)(l.Vt,[(0,m.LQT)(l.c4,"0","auto"),(0,m.BoG)(l.c4,800),(0,m.J0o)(l.c4,20),W(),b(e,t),q(e,t)])}function _(){return(0,k.z4)(F,((e,t)=>D(e,t)),((e,t)=>B(e,t)))}}}]);